<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TECNOPRO · Laboratorios Farmabelleza – Catálogo 2025</title>
  <meta name="description" content="Línea profesional TECNOPRO: alisados, tratamientos, matizantes y coloración. Elegancia, desempeño y resultados de alto nivel para salones y profesionales." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0d12; /* fondo base */
      --card:#11141b; /* tarjetas */
      --muted:#aab3c5; /* texto secundario */
      --text:#e8eefc; /* texto principal */
      --brand:#d19805; /* principal */
      --brand-2:#f7e936; /* acento */
      --glass:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.08);
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --radius-lg:26px;
      --radius-sm:12px;
      --container:1150px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.5 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      color:var(--text); background: radial-gradient(1200px 600px at 20% -10%, rgba(106,166,255,.25), transparent 60%),
                radial-gradient(900px 500px at 90% 10%, rgba(122,240,200,.18), transparent 60%),
                linear-gradient(180deg,#0a0c11 0%, #0d1017 60%, #2d2002 100%);
      letter-spacing:.2px;
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    .container{width:min(100%, var(--container)); margin-inline:auto; padding-inline:20px}

    /* Header */
    .header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(120%) blur(10px); background:linear-gradient(180deg, rgba(11,13,18,.85), rgba(11,13,18,.55)); border-bottom:1px solid var(--stroke)}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:42px; height:42px; border-radius:14px; background:conic-gradient(from 180deg at 50% 50%, var(--brand), var(--brand-2), #c0a8ff, var(--brand)); box-shadow:0 6px 16px rgba(122,240,200,.2);}
    .brand h1{font-size:18px; margin:0; font-weight:700; letter-spacing:.5px}
    .brand small{display:block; font-weight:500; color:var(--muted); margin-top:-2px}
    .nav a.link{opacity:.9; padding:8px 10px; border-radius:10px}
    .nav a.link:hover{background:var(--glass)}
    .cta{display:flex; gap:10px; align-items:center}
    .btn{border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; transition:.2s transform, .2s background; box-shadow:var(--shadow)}
    .btn:hover{transform:translateY(-1px); background:linear-gradient(180deg, rgba(255,255,255,.1), rgba(255,255,255,.03))}
    .btn.brand{border-color:transparent; background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#0c1120; font-weight:700}

    /* Hero */
    .hero{position:relative; overflow:hidden; background: radial-gradient(1200px 600px at 20% -10%, rgba(106, 166, 255, .25), transparent 60%), radial-gradient(900px 500px at 90% 10%, rgba(122, 240, 200, .18), transparent 60%), linear-gradient(180deg, #312e2a 0%, #0d1017 60%, #2d2002 100%);}
    .hero .inner{display:grid; grid-template-columns:1.1fr .9fr; align-items:center; gap:36px; padding:64px 0}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; font-size:12px; border-radius:999px; background:rgba(122,240,200,.08); border:1px solid rgba(122,240,200,.25); color:#bff5e5}
    .title{font-size:clamp(32px, 4vw, 48px); line-height:1.1; margin:14px 0 12px; letter-spacing:.3px}
    .subtitle{color:var(--muted); max-width:60ch}
    .hero-card{border:1px solid var(--stroke); border-radius:var(--radius-lg); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); padding:24px; display:grid; gap:16px}
    .kpis{display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-top:16px}
    .kpi{border:1px solid var(--stroke); border-radius:16px; padding:16px; text-align:center; background:var(--glass)}
    .kpi b{font-size:20px}

    /* Toolbar */
    .toolbar{display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin:34px 0 16px}
    .tabs{display:flex; gap:10px; flex-wrap:wrap}
    .tab{padding:8px 12px; border-radius:999px; border:1px solid var(--stroke); background:var(--glass); cursor:pointer; font-size:14px}
    .tab.active{background:linear-gradient(135deg, rgba(106,166,255,.2), rgba(122,240,200,.2)); border-color:transparent}
    .search{display:flex; align-items:center; gap:10px; flex:1; min-width:260px; border:1px solid var(--stroke); background:var(--glass); border-radius:12px; padding:10px}
    .search input{background:transparent; border:0; outline:0; color:var(--text); width:100%}

    /* Grid */
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px}
    .card{grid-column:span 4; border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border-radius:var(--radius); overflow:hidden; display:flex; flex-direction:column; min-height:360px; position:relative}
    .media{height:180px; background:radial-gradient(120% 120% at 20% 10%, rgba(106,166,255,.3), transparent 60%), radial-gradient(100% 120% at 80% 10%, rgba(122,240,200,.22), transparent 60%), linear-gradient(180deg,#0b0d12,#0b0d12); border-bottom:1px solid var(--stroke)}
    .badge-tag{position:absolute; top:12px; left:12px; background:rgba(0,0,0,.35); border:1px solid var(--stroke); padding:6px 10px; border-radius:999px; font-size:12px; backdrop-filter:blur(4px)}
    .content{padding:16px; display:grid; gap:8px}
    .content h3{margin:0; font-size:18px}
    .content p{margin:0; color:var(--muted)}
    .tags{display:flex; flex-wrap:wrap; gap:8px; margin-top:6px}
    .chip{font-size:12px; border:1px solid var(--stroke); color:#cfe0ff; background:rgba(106,166,255,.08); padding:4px 8px; border-radius:999px}
    .actions{display:flex; gap:10px; padding:14px 16px 16px; margin-top:auto}

    /* Floating Quote (mini-cart) */
    .quote{position:fixed; right:18px; bottom:18px; width:min(400px, 92vw); border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04)); border-radius:18px; box-shadow:var(--shadow); display:none}
    .quote.active{display:block}
    .quote header{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--stroke)}
    .quote .list{max-height:260px; overflow:auto; display:grid; gap:8px; padding:12px 14px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; border:1px solid var(--stroke); background:var(--glass)}
    .quote .footer{display:grid; gap:10px; padding:14px}

    /* Sections */
    section{padding:54px 0}
    .about{display:grid; grid-template-columns:1.1fr .9fr; gap:24px; align-items:center}
    .about .panel{border:1px solid var(--stroke); border-radius:var(--radius-lg); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); padding:22px}
    .bullets{display:grid; gap:10px}
    .bullet{display:flex; gap:12px; align-items:flex-start}

    /* Footer */
    footer{border-top:1px solid var(--stroke); background:#0a0c11}
    .foot{display:grid; grid-template-columns:1.2fr .8fr; gap:20px; padding:24px 0}
    .muted{color:var(--muted)}

    /* Responsive */
    @media (max-width: 990px){
      .hero .inner{grid-template-columns:1fr; padding:44px 0}
      .kpis{grid-template-columns:repeat(2,1fr)}
      .card{grid-column:span 6}
      .about{grid-template-columns:1fr}
      .foot{grid-template-columns:1fr}
    }
    @media (max-width: 640px){
      .grid{grid-template-columns:repeat(6,1fr)}
      .card{grid-column:span 6}
      .nav{gap:8px}
      .brand h1{font-size:16px}
      .title{font-size:28px}
    }
  </style>
</head>
<body>
  <!-- Header / Navbar -->
  <header class="header">
    <div class="container nav">
      <a class="brand" href="#inicio" aria-label="Inicio TECNOPRO">
        <span class="logo" aria-hidden="true"></span>
        <div>
          <h1>TECNOPRO <small style="font-weight:600; color:#8ab6ff">Laboratorios Farmabelleza</small></h1>
          <small>Especialistas en cuidado capilar profesional</small>
        </div>
      </a>
      <nav style="display:flex; gap:6px; align-items:center">
        <a class="link" href="#catalogo">Catálogo</a>
        <a class="link" href="#nosotros">Nosotros</a>
        <a class="link" href="#contacto">Contacto</a>
        <button class="btn brand" id="btnAbrirCotizacion" title="Ver cotización">Cotización</button>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="inicio">
    <div class="container inner">
      <div>
        <span class="badge">Catálogo 2025 · Línea profesional</span>
        <h2 class="title">Resultados de salón, ciencia de laboratorio.<br> Elegancia y desempeño en cada fórmula.</h2>
        <p class="subtitle">Desde alisados de alto desempeño hasta tratamientos reconstructor, matizantes y coloración. TECNOPRO reúne tecnología capilar de última generación con protocolos claros para estilistas y profesionales.</p>

        <div class="kpis">
          <div class="kpi"><b>2010</b><div class="muted">Año de fundación</div></div>
          <div class="kpi"><b>+15</b><div class="muted">Líneas especializadas</div></div>
          <div class="kpi"><b>Colombia</b><div class="muted">Cobertura nacional</div></div>
          <div class="kpi"><b>Pro</b><div class="muted">Uso profesional</div></div>
        </div>

        <div style="display:flex; gap:10px; margin-top:18px">
          <a href="#catalogo" class="btn brand">Explorar productos</a>
          <a href="#contacto" class="btn">Hablar por WhatsApp</a>
        </div>
      </div>
      <div class="hero-card">
        <div class="muted" style="font-weight:600; letter-spacing:.6px">Protocolos destacados</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px">
          <div class="panel small" style="border:1px solid var(--stroke); border-radius:16px; padding:14px; background:var(--glass)">
            <b>Alisado – Shock de Aminoácidos</b>
            <div class="muted">4 pasos | Rubios: sin naranjas</div>
          </div>
          <div class="panel small" style="border:1px solid var(--stroke); border-radius:16px; padding:14px; background:var(--glass)">
            <b>Keratina Express</b>
            <div class="muted">3 pasos | acabado sedoso</div>
          </div>
          <div class="panel small" style="border:1px solid var(--stroke); border-radius:16px; padding:14px; background:var(--glass)">
            <b>Liso Laminado</b>
            <div class="muted">Efecto espejo | 4 pasos</div>
          </div>
          <div class="panel small" style="border:1px solid var(--stroke); border-radius:16px; padding:14px; background:var(--glass)">
            <b>FarmaPlex</b>
            <div class="muted">Protección en coloración</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Catálogo -->
  <section id="catalogo">
    <div class="container">
      <div class="toolbar">
        <div class="tabs" id="tabs"></div>
        <label class="search" aria-label="Buscar producto">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          <input id="q" type="search" placeholder="Buscar por nombre, uso o línea…" />
        </label>
      </div>

      <div class="grid" id="grid"></div>
    </div>
  </section>

  <!-- Sobre nosotros -->
  <section id="nosotros">
    <div class="container about">
      <div class="panel">
        <h3 style="margin-top:0">Sobre Laboratorios Farmabelleza</h3>
        <p class="muted">Empresa orgullosamente santandereana fundada en 2010 en Bucaramanga. Con trayectoria en cosmética profesional y dispositivos médicos, nos consolidamos como una compañía sostenible en el territorio nacional.</p>
        <div class="bullets">
          <div class="bullet">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="flex:0 0 auto"><circle cx="12" cy="12" r="10" stroke="var(--brand)" stroke-width="2"/><path d="M7 12l3 3 7-7" stroke="var(--brand-2)" stroke-width="2" stroke-linecap="round"/></svg>
            <div>
              <b>Enfoque profesional</b>
              <div class="muted">Protocolos claros para resultados consistentes en salón.</div>
            </div>
          </div>
          <div class="bullet">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="flex:0 0 auto"><path d="M4 7h16M7 7v10a3 3 0 003 3h4a3 3 0 003-3V7" stroke="#8ab6ff" stroke-width="2"/><rect x="10" y="3" width="4" height="4" rx="1" fill="#7af0c8"/></svg>
            <div>
              <b>Ingredientes de alto desempeño</b>
              <div class="muted">Complejos como Keradynn, Prodew 500, D-Pantenol y protectores de fibra.</div>
            </div>
          </div>
          <div class="bullet">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="flex:0 0 auto"><path d="M12 2v20M2 12h20" stroke="#7af0c8" stroke-width="2"/></svg>
            <div>
              <b>Innovación continua</b>
              <div class="muted">Líneas especializadas para rubios, alisado, reparación y color.</div>
            </div>
          </div>
        </div>
      </div>
      <div class="panel">
        <h3 style="margin-top:0">Contacto</h3>
        <p class="muted">Bucaramanga, Santander – Colombia</p>
        <div style="display:grid; gap:10px; margin-top:8px">
          <a class="pill" href="#" id="wppFooter"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20.52 3.48A11.51 11.51 0 003.5 20.5l-1 3 3-1A11.51 11.51 0 0020.5 3.5z" stroke="currentColor" stroke-width="1.6"/><path d="M8 10c.5 2 2.5 4 4.5 4.5M8 10l1.5-1.5M12.5 14.5L14 13" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg> WhatsApp</a>
          <a class="pill" href="mailto:contacto@laboratoriosfarmabelleza.com"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 7l9 6 9-6" stroke="currentColor" stroke-width="1.6"/><rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="1.6" fill="none"/></svg> contacto@laboratoriosfarmabelleza.com</a>
          <a class="pill" href="https://maps.google.com/?q=Bucaramanga%2C%20Santander%2C%20Colombia" target="_blank" rel="noopener"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 21s7-4.35 7-10a7 7 0 10-14 0c0 5.65 7 10 7 10z" stroke="currentColor" stroke-width="1.6" fill="none"/></svg> Ver en mapa</a>
        </div>
      </div>
    </div>
  </section>

  <footer id="contacto">
    <div class="container foot">
      <div>
        <h4 style="margin:10px 0">TECNOPRO · Laboratorios Farmabelleza</h4>
        <div class="muted">Carrera 24 # 16-36 — Bucaramanga, Santander, Colombia</div>
        <div class="muted">Sitio web: www.laboratoriosfarmabelleza.com</div>
      </div>
      <div style="display:flex; align-items:center; justify-content:flex-end; gap:10px">
        <a class="btn" href="#catalogo">Ver catálogo</a>
        <a class="btn brand" id="btnWppFooter">Cotizar por WhatsApp</a>
      </div>
    </div>
  </footer>

  <!-- Cotización flotante -->
  <aside class="quote" id="quote">
    <header>
      <strong>Tu cotización</strong>
      <button class="btn" id="btnCerrarCotizacion" aria-label="Cerrar cotización">Cerrar</button>
    </header>
    <div class="list" id="quoteList"></div>
    <div class="footer">
      <textarea id="note" rows="3" placeholder="Notas adicionales (presentación, cantidades, ciudad)…" style="width:100%; background:var(--glass); border:1px solid var(--stroke); border-radius:12px; color:var(--text); padding:10px"></textarea>
      <div style="display:flex; gap:10px; align-items:center; justify-content:space-between">
        <small class="muted" id="totalItems">0 productos</small>
        <button class="btn brand" id="sendWpp">Enviar por WhatsApp</button>
      </div>
    </div>
  </aside>

  <script>
    // ======= DATA (Curado a partir del PDF) =======
    const BRAND = {
      name: "Laboratorios Farmabelleza",
      line: "TECNOPRO",
      whatsapp: "573001234567" // ← Reemplazar por número real (sin +)
    };

    const CATEGORIES = ["Todos","Alisado","Tratamiento","Matizantes","Tintes","Niños"];

    const PRODUCTS = [
      {
        id:"shock-aminoacidos",
        nombre:"Shock de Aminoácidos",
        resumen:"Alisado en 4 pasos diseñado para cabellos rubios. Evita tonos naranjas y deja un acabado sedoso.",
        tags:["4 pasos","Rubios","Aminoácidos","Proteínas"],
        categoria:"Alisado"
      },
      {
        id:"keratina-express",
        nombre:"Keratina Express",
        resumen:"Sistema de alisado en 3 pasos con resultado profesional y brillo inmediato.",
        tags:["3 pasos","Liso perfecto","Brillo"],
        categoria:"Alisado"
      },
      {
        id:"liso-laminado",
        nombre:"Liso Laminado",
        resumen:"Efecto espejo con protocolo de 4 pasos. Control de frizz y suavidad extrema.",
        tags:["Efecto espejo","4 pasos","Antifrizz"],
        categoria:"Alisado"
      },
      {
        id:"topliss-4k",
        nombre:"Top-Liss 4K",
        resumen:"Alisado de alto desempeño, acabado ultra pulido 4K.",
        tags:["Alto desempeño","Largo efecto"],
        categoria:"Alisado"
      },
      {
        id:"farMaplex",
        nombre:"FarmaPlex",
        resumen:"Escudo protector de fibra durante procesos químicos y coloración.",
        tags:["Protección","Coloración","Fibras"],
        categoria:"Tratamiento"
      },
      {
        id:"shot-reconstructor",
        nombre:"Shot Reconstructor",
        resumen:"Ampolla/shot con proteínas reparadoras para fortalecer y devolver elasticidad.",
        tags:["Reparación","Elasticidad"],
        categoria:"Tratamiento"
      },
      {
        id:"relleno-proteinico",
        nombre:"Relleno Proteínico",
        resumen:"Reconstructor intensivo que repone masa y sella cutícula.",
        tags:["Reconstructor","Proteínas"],
        categoria:"Tratamiento"
      },
      {
        id:"aceite-coco",
        nombre:"Aceite de Coco",
        resumen:"Nutrición, brillo y suavidad. Apoyo en sellado de puntas.",
        tags:["Nutrición","Brillo"],
        categoria:"Tratamiento"
      },
      {
        id:"aceite-cannabis",
        nombre:"Aceite de Cannabis",
        resumen:"Hidratación profunda y fortalecimiento de fibra capilar.",
        tags:["Hidratación","Fortaleza"],
        categoria:"Tratamiento"
      },
      {
        id:"rubios-platinos",
        nombre:"Rubios & Platinados (Matizantes)",
        resumen:"Matizantes para neutralizar amarillos/naranjas y mantener rubios fríos.",
        tags:["Matizante","Rubios"],
        categoria:"Matizantes"
      },
      {
        id:"matizantes",
        nombre:"Matizantes Violeta/Azul",
        resumen:"Corrección de tono y mantenimiento del color entre servicios.",
        tags:["Violeta","Azul","Neutraliza"],
        categoria:"Matizantes"
      },
      {
        id:"tinte-permanente",
        nombre:"Tinte Permanente",
        resumen:"Coloración profesional de alto cubrimiento y brillo.",
        tags:["Color","Cobertura"],
        categoria:"Tintes"
      },
      {
        id:"cebolla-roja",
        nombre:"Cebolla Roja Cabezona",
        resumen:"Línea revitalizante (shampoo + mascarilla + tratamiento). Ideal cabello largo.",
        tags:["Revitaliza","Cabello largo"],
        categoria:"Tratamiento"
      },
      {
        id:"tecno-pro-kid",
        nombre:"Tecno Pro Kid",
        resumen:"Cuidado suave y seguro para niños.",
        tags:["Niños","Suavidad"],
        categoria:"Niños"
      }
    ];

    // ======= RENDER =======
    const $tabs = document.querySelector('#tabs');
    const $grid = document.querySelector('#grid');
    const $q = document.querySelector('#q');
    const $quote = document.querySelector('#quote');
    const $quoteList = document.querySelector('#quoteList');
    const $totalItems = document.querySelector('#totalItems');

    let state = { cat:"Todos", q:"", cart:[] };

    function renderTabs(){
      $tabs.innerHTML = '';
      CATEGORIES.forEach(cat=>{
        const a = document.createElement('button');
        a.className = 'tab'+(state.cat===cat?' active':'');
        a.textContent = cat;
        a.onclick = ()=>{ state.cat = cat; renderGrid(); scrollToHash('catalogo'); };
        $tabs.appendChild(a);
      })
    }

    function match(p){
      const matchesCat = state.cat==='Todos' || p.categoria===state.cat;
      const q = state.q.trim().toLowerCase();
      const matchesQ = !q || [p.nombre, p.resumen, ...(p.tags||[])].join(' ').toLowerCase().includes(q);
      return matchesCat && matchesQ;
    }

    function renderGrid(){
      const list = PRODUCTS.filter(match);
      $grid.innerHTML = '';
      list.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="media"></div>
          <span class="badge-tag">${p.categoria}</span>
          <div class="content">
            <h3>${p.nombre}</h3>
            <p>${p.resumen}</p>
            <div class="tags">${(p.tags||[]).map(t=>`<span class='chip'>${t}</span>`).join('')}</div>
          </div>
          <div class="actions">
            <button class='btn' aria-label='Más detalles' data-id='${p.id}'>Detalles</button>
            <button class='btn brand' aria-label='Agregar a cotización' data-add='${p.id}'>Agregar</button>
          </div>
        `;
        $grid.appendChild(card);
      })
      bindCardActions();
    }

    function bindCardActions(){
      document.querySelectorAll('[data-add]').forEach(btn=>{
        btn.onclick = ()=>{
          const id = btn.getAttribute('data-add');
          const p = PRODUCTS.find(x=>x.id===id);
          if(!state.cart.some(x=>x.id===id)) state.cart.push(p);
          openQuote();
          renderQuote();
        }
      })
      document.querySelectorAll('[data-id]').forEach(btn=>{
        btn.onclick = ()=>{
          const id = btn.getAttribute('data-id');
          openDetails(id);
        }
      })
    }

    function renderQuote(){
      $quoteList.innerHTML = '';
      state.cart.forEach(p=>{
        const row = document.createElement('div');
        row.className = 'pill';
        row.innerHTML = `<strong>${p.nombre}</strong> · <span class='muted'>${p.categoria}</span> <button class='btn' data-del='${p.id}' style='padding:4px 8px'>Quitar</button>`;
        $quoteList.appendChild(row);
      })
      $totalItems.textContent = `${state.cart.length} producto${state.cart.length!==1?'s':''}`;
      document.querySelectorAll('[data-del]').forEach(b=> b.onclick = ()=>{
        const id = b.getAttribute('data-del');
        state.cart = state.cart.filter(x=>x.id!==id); renderQuote();
      });
    }

    function openQuote(){ $quote.classList.add('active'); }
    function closeQuote(){ $quote.classList.remove('active'); }

    function openDetails(id){
      const p = PRODUCTS.find(x=>x.id===id);
      const html = `
        <div class='dialog-backdrop' role='dialog' aria-modal='true'>
          <div class='dialog'>
            <header>
              <strong>${p.nombre}</strong>
              <button class='btn' data-close>Close</button>
            </header>
            <div class='dialog-body'>
              <p class='muted'>${p.resumen}</p>
              <ul style='margin:10px 0 0; padding-left:18px'>
                ${(p.tags||[]).map(t=>`<li>${t}</li>`).join('')}
              </ul>
            </div>
            <footer>
              <button class='btn' data-close>Volver</button>
              <button class='btn brand' data-add='${p.id}'>Agregar a cotización</button>
            </footer>
          </div>
        </div>`;
      const wrap = document.createElement('div');
      wrap.innerHTML = html;
      document.body.appendChild(wrap);
      wrap.querySelectorAll('[data-close]').forEach(b=> b.onclick = ()=> wrap.remove());
      wrap.querySelectorAll('[data-add]').forEach(b=> b.onclick = ()=>{ state.cart.push(p); renderQuote(); openQuote(); wrap.remove(); })
    }

    // Dialog styles
    const style = document.createElement('style');
    style.textContent = `
      .dialog-backdrop{position:fixed; inset:0; background:rgba(7,10,16,.6); display:grid; place-items:center; z-index:60}
      .dialog{width:min(680px,92vw); border:1px solid var(--stroke); border-radius:20px; background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03)); box-shadow:var(--shadow); overflow:hidden}
      .dialog header, .dialog footer{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-bottom:1px solid var(--stroke)}
      .dialog footer{border-top:1px solid var(--stroke); border-bottom:none}
      .dialog-body{padding:14px}
    `;
    document.head.appendChild(style);

    function debounce(fn,ms){let t;return function(){clearTimeout(t);t=setTimeout(()=>fn.apply(this,arguments),ms)}}

    function scrollToHash(id){document.getElementById(id)?.scrollIntoView({behavior:'smooth'})}

    // ======= EVENTS =======
    renderTabs(); renderGrid();
    $q.addEventListener('input', debounce(e=>{state.q=e.target.value; renderGrid()}, 120));

    // Quote open/close
    document.getElementById('btnAbrirCotizacion').onclick = openQuote;
    document.getElementById('btnCerrarCotizacion').onclick = closeQuote;

    // WhatsApp compose
    function buildWppText(){
      const items = state.cart.map(x=>`• ${x.nombre} (${x.categoria})`).join('%0A');
      const note = encodeURIComponent(document.getElementById('note').value || '');
      const base = `Hola, quiero cotizar:%0A${items}%0A%0A${note ? ('Notas: '+note) : ''}`;
      return base;
    }

    function openWpp(){
      const text = buildWppText();
      const url = `https://wa.me/${BRAND.whatsapp}?text=${text}`;
      window.open(url, '_blank');
    }

    document.getElementById('sendWpp').onclick = openWpp;
    document.getElementById('btnWppFooter').onclick = openWpp;
    document.getElementById('wppFooter').onclick = (e)=>{e.preventDefault(); openWpp();}
  </script>

  <!-- Schema.org basic brand -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Laboratorios Farmabelleza – TECNOPRO",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Bucaramanga",
      "addressRegion": "Santander",
      "addressCountry": "CO"
    },
    "url": "https://www.laboratoriosfarmabelleza.com"
  }
  </script>
</body>
</html>
